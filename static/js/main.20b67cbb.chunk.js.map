{"version":3,"sources":["utils/webRTCHandler.js","resources/images/Doctor.svg","IntroductionPage/ConnectingButton.js","IntroductionPage/ConnectingButtons.js","store/actions.js","IntroductionPage/IntroductionPage.js","JoinRoomPage/JoinRoomTitle.js","JoinRoomPage/JoinRoomInputs.js","JoinRoomPage/OnlyWithAudioCheckbox.js","resources/images/check.png","JoinRoomPage/ErrorMessage.js","JoinRoomPage/JoinRoomButtons.js","utils/api.js","JoinRoomPage/JoinRoomContent.js","JoinRoomPage/JoinRoomPage.js","RoomPage/ChatSection/ChatLabel.js","RoomPage/ChatSection/Messages.js","resources/images/sendMessageButton.svg","store/reducer.js","store/store.js","utils/wss.js","RoomPage/ChatSection/NewMessage.js","RoomPage/ChatSection/ChatSection.js","RoomPage/ParticipantsSection/ParticipantsLabel.js","RoomPage/ParticipantsSection/Participants.js","RoomPage/ParticipantsSection/ParticipantsSection.js","resources/images/camera.svg","resources/images/cameraOff.svg","RoomPage/VideoSection/CameraButton.js","RoomPage/VideoSection/LeaveRoomButton.js","resources/images/mic.svg","resources/images/micOff.svg","RoomPage/VideoSection/MicButton.js","resources/images/switchToScreenSharing.svg","RoomPage/VideoSection/LocalScreenSharingPreview.js","RoomPage/VideoSection/SwitchToScreenSharingButton.js","RoomPage/VideoSection/VideoButtons.js","RoomPage/VideoSection/VideoSection.js","RoomPage/RoomLabel.js","RoomPage/Overlay.js","RoomPage/RoomPage.js","App.js","serviceWorker.js","index.js"],"names":["localStream","ConnectingButton","createRoomButton","buttonText","onClickHandler","buttonClass","className","onClick","ConnectingButtons","history","useHistory","src","push","Actions","SET_IS_ROOM_HOST","SET_CONNECT_ONLY_WITH_AUDIO","SET_IDENTITY","SET_ROOM_ID","SET_SHOW_OVERLAY","SET_PARTICIPANTS","SET_MESSAGES","setIsRoomHost","isRoomHost","type","setRoomId","roomId","setShowOverlay","showOverlay","connect","dispatch","setIsRoomHostAction","useEffect","logo","JoinRoomTitle","titleText","Input","placeholder","value","changeHandler","onChange","JoinRoomInputs","props","roomIdValue","setRoomIdValue","nameValue","phoneValue","setNameValue","setPhoneValue","event","target","OnlyWithAudioCheckbox","connectOnlyWithAudio","setConnectOnlyWithAudio","ErrorMessage","errorMessage","Button","cancelButton","JoinRoomButtons","handleJoinRoom","successButtonText","getRoomExists","a","axios","get","response","data","state","onlyWithAudio","setIdentityAction","identity","setIdentity","setRoomIdAction","useState","setErrorMessage","createRoom","joinRoom","responseMessage","roomExists","full","search","useLocation","URLSearchParams","ChatLabel","Message","author","content","sameAuthor","messageCreatedByMe","alignClass","authorText","contentAdditionalStyles","messages","map","message","index","initState","participants","reducer","action","store","configureStore","socket","connectWithSocketIOServer","io","on","console","log","id","connectedUsers","connUserSocketId","webRTCHandler","emit","createNewRoom","onlyAudio","defaultConstraints","audio","video","onlyAudioConstraints","getLocalPreviewAndInitRoomConnection","constraints","navigator","mediaDevices","getUserMedia","then","stream","showLocalVideoPreview","wss","catch","err","peers","streams","prepareNewPeerConnection","isInitiator","configuration","iceServers","urls","Peer","initiator","config","channelName","signal","addStream","messageData","JSON","parse","appendNewMessage","handleSignalingData","removePeerConnection","socketId","videoContainer","document","getElementById","videoEl","srcObject","getTracks","forEach","t","stop","removeChild","parentNode","destroy","videosContainer","classList","add","createElement","videoElement","autoplay","muted","onloadedmetadata","play","appendChild","getState","getAudioOnlyLabel","addEventListener","contains","remove","participant","find","p","style","position","labelContainer","label","innerHTML","toggleScreenShare","isScreenSharingActive","screenSharingStream","switchVideoTracks","socket_id","index2","kind","replaceTrack","setMessages","NewMessage","setMessage","sendMessage","length","messageContent","stringifiedMessageData","stringify","send","onKeyDown","key","preventDefault","SendMessageButton","ChatSection","ParticipantsLabel","SingleParticipant","lastItem","ParticipantsSection","CameraButton","isLocalVideoDisabled","setIsLocalVideoDisabled","CameraButtonImgOff","CameraButtonImg","isDisabled","getVideoTracks","enabled","LeaveRoomButton","siteUrl","window","location","origin","href","MicButton","isMicMuted","setIsMicMuted","MicButtonImgOff","MicButtonImg","isMuted","getAudioTracks","LocalScreenSharingPreview","localPreviewRef","useRef","current","autoPlay","ref","SwitchToScreenSharingButton","setIsScreenSharingActive","setScreenSharingStream","handleScreenShareToggle","getDisplayMedia","SwitchImg","VideoSection","RoomLabel","Overlay","App","path","Boolean","hostname","match","ReactDOM","render","StrictMode","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.20b67cbb.chunk.js","sourcesContent":["import { setShowOverlay, setMessages } from \"../store/actions\";\r\nimport store from \"../store/store\";\r\nimport * as wss from \"./wss\";\r\nimport Peer from \"simple-peer\";\r\n\r\nconst defaultConstraints = {\r\n  audio: true,\r\n  video: true\r\n};\r\n\r\nconst onlyAudioConstraints = {\r\n  audio: true,\r\n  video: false,\r\n};\r\n\r\nlet localStream;\r\n\r\nexport const getLocalPreviewAndInitRoomConnection = async (\r\n  isRoomHost,\r\n  identity,\r\n  roomId = null,\r\n  onlyAudio\r\n) => {\r\n\r\n  const constraints = onlyAudio ? onlyAudioConstraints : defaultConstraints;\r\n\r\n  navigator.mediaDevices\r\n    .getUserMedia(constraints)\r\n    .then((stream) => {\r\n      console.log(\"successfuly received local stream\");\r\n      localStream = stream;\r\n      showLocalVideoPreview(localStream);\r\n\r\n      // dispatch an action to hide overlay\r\n      store.dispatch(setShowOverlay(false));\r\n\r\n      isRoomHost\r\n        ? wss.createNewRoom(identity, onlyAudio)\r\n        : wss.joinRoom(identity, roomId, onlyAudio);\r\n    })\r\n    .catch((err) => {\r\n      console.log(\r\n        \"error occurred when trying to get an access to local stream\"\r\n      );\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nlet peers = {};\r\nlet streams = [];\r\n\r\nconst getConfiguration = () => {\r\n    return {\r\n      iceServers: [\r\n        {\r\n          urls: \"stun:stun.l.google.com:19302\",\r\n        },\r\n      ],\r\n    };\r\n};\r\n\r\nconst messengerChannel = \"messenger\";\r\n\r\nexport const prepareNewPeerConnection = (connUserSocketId, isInitiator) => {\r\n  const configuration = getConfiguration();\r\n\r\n  peers[connUserSocketId] = new Peer({\r\n    initiator: isInitiator,\r\n    config: configuration,\r\n    stream: localStream,\r\n    channelName: messengerChannel,\r\n  });\r\n\r\n  peers[connUserSocketId].on(\"signal\", (data) => {\r\n    // webRTC offer, webRTC Answer (SDP informations), ice candidates\r\n\r\n    const signalData = {\r\n      signal: data,\r\n      connUserSocketId: connUserSocketId,\r\n    };\r\n\r\n    wss.signalPeerData(signalData);\r\n  });\r\n\r\n  peers[connUserSocketId].on(\"stream\", (stream) => {\r\n    console.log(\"new stream came\");\r\n\r\n    addStream(stream, connUserSocketId);\r\n    streams = [...streams, stream];\r\n  });\r\n\r\n  peers[connUserSocketId].on(\"data\", (data) => {\r\n    const messageData = JSON.parse(data);\r\n    appendNewMessage(messageData);\r\n  });\r\n};\r\n\r\nexport const handleSignalingData = (data) => {\r\n  //add signaling data to peer connection\r\n  peers[data.connUserSocketId].signal(data.signal);\r\n};\r\n\r\nexport const removePeerConnection = (data) => {\r\n  const { socketId } = data;\r\n  const videoContainer = document.getElementById(socketId);\r\n  const videoEl = document.getElementById(`${socketId}-video`);\r\n\r\n  if (videoContainer && videoEl) {\r\n    const tracks = videoEl.srcObject.getTracks();\r\n\r\n    tracks.forEach((t) => t.stop());\r\n\r\n    videoEl.srcObject = null;\r\n    videoContainer.removeChild(videoEl);\r\n\r\n    videoContainer.parentNode.removeChild(videoContainer);\r\n\r\n    if (peers[socketId]) {\r\n      peers[socketId].destroy();\r\n    }\r\n    delete peers[socketId];\r\n  }\r\n};\r\n\r\n////////////////////////////////// UI Videos //////////////////////////////////\r\nconst showLocalVideoPreview = (stream) => {\r\n  const videosContainer = document.getElementById(\"videos_portal\");\r\n  videosContainer.classList.add(\"videos_portal_styles\");\r\n  const videoContainer = document.createElement(\"div\");\r\n  videoContainer.classList.add(\"video_track_container\");\r\n  const videoElement = document.createElement(\"video\");\r\n  videoElement.autoplay = true;\r\n  videoElement.muted = true;\r\n  videoElement.srcObject = stream;\r\n\r\n  videoElement.onloadedmetadata = () => {\r\n    videoElement.play();\r\n  };\r\n\r\n  videoContainer.appendChild(videoElement);\r\n\r\n  if (store.getState().connectOnlyWithAudio) {\r\n    videoContainer.appendChild(getAudioOnlyLabel());\r\n  }\r\n\r\n  videosContainer.appendChild(videoContainer);\r\n};\r\n\r\nconst addStream = (stream, connUserSocketId) => {\r\n  //display incoming stream\r\n  const videosContainer = document.getElementById(\"videos_portal\");\r\n  const videoContainer = document.createElement(\"div\");\r\n  videoContainer.id = connUserSocketId;\r\n\r\n  videoContainer.classList.add(\"video_track_container\");\r\n  const videoElement = document.createElement(\"video\");\r\n  videoElement.autoplay = true;\r\n  videoElement.srcObject = stream;\r\n  videoElement.id = `${connUserSocketId}-video`;\r\n\r\n  videoElement.onloadedmetadata = () => {\r\n    videoElement.play();\r\n  };\r\n\r\n  videoElement.addEventListener(\"click\", () => {\r\n    if (videoElement.classList.contains(\"full_screen\")) {\r\n      videoElement.classList.remove(\"full_screen\");\r\n    } else {\r\n      videoElement.classList.add(\"full_screen\");\r\n    }\r\n  });\r\n\r\n  videoContainer.appendChild(videoElement);\r\n\r\n  // check if other user connected only with audio\r\n  const participants = store.getState().participants;\r\n\r\n  const participant = participants.find((p) => p.socketId === connUserSocketId);\r\n  console.log(participant);\r\n  if (participant?.onlyAudio) {\r\n    videoContainer.appendChild(getAudioOnlyLabel(participant.identity));\r\n  } else {\r\n    videoContainer.style.position = \"static\";\r\n  }\r\n\r\n  videosContainer.appendChild(videoContainer);\r\n};\r\n\r\nconst getAudioOnlyLabel = (identity = \"\") => {\r\n  const labelContainer = document.createElement(\"div\");\r\n  labelContainer.classList.add(\"label_only_audio_container\");\r\n\r\n  const label = document.createElement(\"p\");\r\n  label.classList.add(\"label_only_audio_text\");\r\n  label.innerHTML = `Only audio ${identity}`;\r\n\r\n  labelContainer.appendChild(label);\r\n  return labelContainer;\r\n};\r\n\r\n////////////////////////////////// Buttons logic //////////////////////////////////\r\n\r\nexport const toggleMic = (isMuted) => {\r\n  localStream.getAudioTracks()[0].enabled = isMuted ? true : false;\r\n};\r\n\r\nexport const toggleCamera = (isDisabled) => {\r\n  localStream.getVideoTracks()[0].enabled = isDisabled ? true : false;\r\n};\r\n\r\nexport const toggleScreenShare = (\r\n  isScreenSharingActive,\r\n  screenSharingStream = null\r\n) => {\r\n  if (isScreenSharingActive) {\r\n    switchVideoTracks(localStream);\r\n  } else {\r\n    switchVideoTracks(screenSharingStream);\r\n  }\r\n};\r\n\r\nconst switchVideoTracks = (stream) => {\r\n  for (let socket_id in peers) {\r\n    for (let index in peers[socket_id].streams[0].getTracks()) {\r\n      for (let index2 in stream.getTracks()) {\r\n        if (\r\n          peers[socket_id].streams[0].getTracks()[index].kind ===\r\n          stream.getTracks()[index2].kind\r\n        ) {\r\n          peers[socket_id].replaceTrack(\r\n            peers[socket_id].streams[0].getTracks()[index],\r\n            stream.getTracks()[index2],\r\n            peers[socket_id].streams[0]\r\n          );\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n////////////////////////////////// Messages /////////////////////////////////////\r\nconst appendNewMessage = (messageData) => {\r\n  const messages = store.getState().messages;\r\n  store.dispatch(setMessages([...messages, messageData]));\r\n};\r\n\r\nexport const sendMessageUsingDataChannel = (messageContent) => {\r\n  // append this message locally\r\n  const identity = store.getState().identity;\r\n\r\n  const localMessageData = {\r\n    content: messageContent,\r\n    identity,\r\n    messageCreatedByMe: true,\r\n  };\r\n\r\n  appendNewMessage(localMessageData);\r\n\r\n  const messageData = {\r\n    content: messageContent,\r\n    identity,\r\n  };\r\n\r\n  const stringifiedMessageData = JSON.stringify(messageData);\r\n  for (let socketId in peers) {\r\n    peers[socketId].send(stringifiedMessageData);\r\n  }\r\n};\r\n","export default __webpack_public_path__ + \"static/media/Doctor.ba69d75e.svg\";","import React from \"react\";\r\n\r\nconst ConnectingButton = ({\r\n  createRoomButton = false,\r\n  buttonText,\r\n  onClickHandler,\r\n}) => {\r\n  const buttonClass = createRoomButton\r\n    ? \"create_room_button\"\r\n    : \"join_room_button\";\r\n\r\n  return (\r\n    <button className={buttonClass} onClick={onClickHandler}>\r\n      {buttonText}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default ConnectingButton;\r\n","import React from \"react\";\r\nimport ConnectingButton from \"./ConnectingButton\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst ConnectingButtons = () => {\r\n  let history = useHistory();\r\n\r\n  const pushToJoinRoomPage = () => {\r\n    history.push(\"/join-room\");\r\n  };\r\n\r\n  const pushToJoinRoomPageAsHost = () => {\r\n    history.push(\"/join-room?host=true\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"introduction_page_container\">\r\n      <div className=\"introduction_page_panel\">\r\n    <div className=\"connecting_buttons_container\">\r\n      <img className=\"round\" src=\"https://img.icons8.com/office/80/undefined/person-male.png\"/>\r\n      <br></br>\r\n      <ConnectingButton\r\n        buttonText=\"Join a meeting\"\r\n        onClickHandler={pushToJoinRoomPage}\r\n      />\r\n    </div>\r\n      </div>\r\n      <div className=\"introduction_page_panel\">\r\n    <div className=\"connecting_buttons_container\">\r\n      <img className=\"round\" src=\"https://img.icons8.com/office/80/undefined/doctor-female.png\"/>\r\n      <br></br>\r\n      <ConnectingButton\r\n        createRoomButton\r\n        buttonText=\"Host a meeting\"\r\n        onClickHandler={pushToJoinRoomPageAsHost}\r\n      />\r\n    </div>\r\n      </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default ConnectingButtons;\r\n","const Actions = {\r\n  SET_IS_ROOM_HOST: \"SET_IS_ROOM_HOST\",\r\n  SET_CONNECT_ONLY_WITH_AUDIO: \"SET_CONNECT_ONLY_WITH_AUDIO\",\r\n  SET_IDENTITY: \"SET_IDENTITY\",\r\n  SET_ROOM_ID: \"SET_ROOM_ID\",\r\n  SET_SHOW_OVERLAY: \"SET_SHOW_OVERLAY\",\r\n  SET_PARTICIPANTS: \"SET_PARTICIPANTS\",\r\n  SET_MESSAGES: \"SET_MESSAGES\",\r\n};\r\n\r\nexport const setIsRoomHost = (isRoomHost) => {\r\n  return {\r\n    type: Actions.SET_IS_ROOM_HOST,\r\n    isRoomHost,\r\n  };\r\n};\r\n\r\nexport const setConnectOnlyWithAudio = (onlyWithAudio) => {\r\n  return {\r\n    type: Actions.SET_CONNECT_ONLY_WITH_AUDIO,\r\n    onlyWithAudio,\r\n  };\r\n};\r\n\r\nexport const setIdentity = (identity) => {\r\n  return {\r\n    type: Actions.SET_IDENTITY,\r\n    identity,\r\n  };\r\n};\r\n\r\nexport const setRoomId = (roomId) => {\r\n  return {\r\n    type: Actions.SET_ROOM_ID,\r\n    roomId,\r\n  };\r\n};\r\n\r\nexport const setShowOverlay = (showOverlay) => {\r\n  return {\r\n    type: Actions.SET_SHOW_OVERLAY,\r\n    showOverlay,\r\n  };\r\n};\r\n\r\nexport const setParticipants = (participants) => {\r\n  return {\r\n    type: Actions.SET_PARTICIPANTS,\r\n    participants,\r\n  };\r\n};\r\n\r\nexport const setMessages = (messages) => {\r\n  return {\r\n    type: Actions.SET_MESSAGES,\r\n    messages,\r\n  };\r\n};\r\n\r\nexport default Actions;\r\n","import React, { useEffect } from \"react\";\r\nimport logo from \"../resources/images/Doctor.svg\";\r\nimport ConnectingButtons from \"./ConnectingButtons\";\r\nimport { connect } from \"react-redux\";\r\nimport { setIsRoomHost } from \"../store/actions\";\r\n\r\nimport \"./IntroductionPage.css\";\r\n\r\nconst IntroductionPage = ({ setIsRoomHostAction }) => {\r\n  useEffect(() => {\r\n    setIsRoomHostAction(false);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"main_page_container\">\r\n      <img src={logo} className=\"introduction_page_image\"></img>\r\n      <ConnectingButtons />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    setIsRoomHostAction: (isRoomHost) => dispatch(setIsRoomHost(isRoomHost)),\r\n  };\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(IntroductionPage);\r\n","import React from \"react\";\r\n\r\nconst JoinRoomTitle = ({ isRoomHost }) => {\r\n  const titleText = isRoomHost ? \"Host meeting\" : \"Join meeting\";\r\n\r\n  return <p className=\"join_room_title\">{titleText}</p>;\r\n};\r\n\r\nexport default JoinRoomTitle;\r\n","import React from \"react\";\r\n\r\nconst Input = ({ placeholder, value, changeHandler }) => {\r\n  return (\r\n    <input\r\n      value={value}\r\n      onChange={changeHandler}\r\n      className=\"join_room_input\"\r\n      placeholder={placeholder}\r\n    />\r\n  );\r\n};\r\n\r\nconst JoinRoomInputs = (props) => {\r\n  const { roomIdValue, setRoomIdValue, nameValue, phoneValue, setNameValue, setPhoneValue, isRoomHost } =\r\n    props;\r\n\r\n  const handleRoomIdValueChange = (event) => {\r\n    setRoomIdValue(event.target.value);\r\n  };\r\n\r\n  const handleNameValueChange = (event) => {\r\n    setNameValue(event.target.value);\r\n  };\r\n\r\n  const handlePhoneValueChange = (event) => {\r\n    setPhoneValue(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"join_room_inputs_container\">\r\n      {!isRoomHost && (\r\n        <Input\r\n          placeholder=\"Enter meeting ID\"\r\n          value={roomIdValue}\r\n          changeHandler={handleRoomIdValueChange}\r\n        />\r\n      )}\r\n      <Input\r\n        placeholder=\"Enter your Name\"\r\n        value={nameValue}\r\n        changeHandler={handleNameValueChange}\r\n      />\r\n      <Input\r\n        placeholder=\"Enter your Phone\"\r\n        value={phoneValue}\r\n        changeHandler={handlePhoneValueChange}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default JoinRoomInputs;\r\n","import React from \"react\";\r\nimport CheckImg from \"../resources/images/check.png\";\r\n\r\nconst OnlyWithAudioCheckbox = ({\r\n  connectOnlyWithAudio,\r\n  setConnectOnlyWithAudio,\r\n}) => {\r\n  const handleConnectionTypeChange = () => {\r\n    setConnectOnlyWithAudio(!connectOnlyWithAudio);\r\n  };\r\n\r\n  return (\r\n    <div className=\"checkbox_container\">\r\n      <div className=\"checkbox_connection\" onClick={handleConnectionTypeChange}>\r\n        {connectOnlyWithAudio && (\r\n          <img className=\"checkbox_image\" src={CheckImg}></img>\r\n        )}\r\n      </div>\r\n      <p className=\"checkbox_container_paragraph\">Only audio</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OnlyWithAudioCheckbox;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABiSURBVHgB7ZHBCQAgCEUdpREaoY0boREaoREawQw8hNShFLz04EOHz8MU4OMKIgZKpkTQwrJG6fMNGoRMN52fjMvltI/ryWaJy01Kn7+5k6p3JqTJ5ACLFE2uuUiriezjywAgdcf6AfL4kwAAAABJRU5ErkJggg==\"","import React from \"react\";\r\n\r\nconst ErrorMessage = ({ errorMessage }) => {\r\n  return (\r\n    <div className=\"error_message_container\">\r\n      {errorMessage && (\r\n        <p className=\"error_message_paragraph\">{errorMessage}</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorMessage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Button = ({ buttonText, cancelButton = false, onClickHandler }) => {\r\n  const buttonClass = cancelButton\r\n    ? \"join_room_cancel_button\"\r\n    : \"join_room_success_button\";\r\n\r\n  return (\r\n    <button onClick={onClickHandler} className={buttonClass}>\r\n      {buttonText}\r\n    </button>\r\n  );\r\n};\r\n\r\nconst JoinRoomButtons = ({ handleJoinRoom, isRoomHost }) => {\r\n  const successButtonText = isRoomHost ? \"Host\" : \"Join\";\r\n\r\n  const history = useHistory();\r\n\r\n  const pushToIntroductionPage = () => {\r\n    history.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"join_room_buttons_container\">\r\n      <Button buttonText={successButtonText} onClickHandler={handleJoinRoom} />\r\n      <Button\r\n        buttonText=\"Cancel\"\r\n        cancelButton\r\n        onClickHandler={pushToIntroductionPage}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default JoinRoomButtons;\r\n","import axios from \"axios\";\r\n\r\n// const serverApi = \"http://localhost:5002/api\";\r\nconst serverApi = \"https://annavideoserver.herokuapp.com/api\";\r\nexport const getRoomExists = async (roomId) => {\r\n  const response = await axios.get(`${serverApi}/room-exists/${roomId}`);\r\n  return response.data;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport JoinRoomInputs from \"./JoinRoomInputs\";\r\nimport { connect } from \"react-redux\";\r\nimport OnlyWithAudioCheckbox from \"./OnlyWithAudioCheckbox\";\r\nimport {\r\n  setConnectOnlyWithAudio,\r\n  setIdentity,\r\n  setRoomId,\r\n} from \"../store/actions\";\r\nimport ErrorMessage from \"./ErrorMessage\";\r\nimport JoinRoomButtons from \"./JoinRoomButtons\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getRoomExists } from \"../utils/api\";\r\n\r\nconst JoinRoomContent = (props) => {\r\n  const {\r\n    isRoomHost,\r\n    setConnectOnlyWithAudio,\r\n    connectOnlyWithAudio,\r\n    setIdentityAction,\r\n    setRoomIdAction,\r\n  } = props;\r\n\r\n  const [roomIdValue, setRoomIdValue] = useState(\"\");\r\n  const [nameValue, setNameValue] = useState(\"\");\r\n  const [phoneValue, setPhoneValue] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const handleJoinRoom = async () => {\r\n    setIdentityAction(nameValue);\r\n    if (isRoomHost) {\r\n      createRoom();\r\n    } else {\r\n      await joinRoom();\r\n    }\r\n  };\r\n\r\n  const joinRoom = async () => {\r\n    const responseMessage = await getRoomExists(roomIdValue);\r\n\r\n    const { roomExists, full } = responseMessage;\r\n\r\n    if (roomExists) {\r\n      if (full) {\r\n        setErrorMessage(\"Meeting is full. Please try again later.\");\r\n      } else {\r\n        // join a room !\r\n        setRoomIdAction(roomIdValue);\r\n        history.push(\"/room\");\r\n      }\r\n    } else {\r\n      setErrorMessage(\"Meeting not found. Check your meeting id.\");\r\n    }\r\n  };\r\n\r\n  const createRoom = () => {\r\n    history.push(\"/room\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <JoinRoomInputs\r\n        roomIdValue={roomIdValue}\r\n        setRoomIdValue={setRoomIdValue}\r\n        nameValue={nameValue}\r\n        setNameValue={setNameValue}\r\n        phoneValue={phoneValue}\r\n        setPhoneValue={setPhoneValue}\r\n        isRoomHost={isRoomHost}\r\n      />\r\n      <OnlyWithAudioCheckbox\r\n        setConnectOnlyWithAudio={setConnectOnlyWithAudio}\r\n        connectOnlyWithAudio={connectOnlyWithAudio}\r\n      />\r\n      <ErrorMessage errorMessage={errorMessage} />\r\n      <JoinRoomButtons\r\n        handleJoinRoom={handleJoinRoom}\r\n        isRoomHost={isRoomHost}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    setConnectOnlyWithAudio: (onlyWithAudio) =>\r\n      dispatch(setConnectOnlyWithAudio(onlyWithAudio)),\r\n    setIdentityAction: (identity) => dispatch(setIdentity(identity)),\r\n    setRoomIdAction: (roomId) => dispatch(setRoomId(roomId)),\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStoreStateToProps,\r\n  mapActionsToProps\r\n)(JoinRoomContent);\r\n","import React, { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { setIsRoomHost } from \"../store/actions\";\r\nimport JoinRoomTitle from \"./JoinRoomTitle\";\r\nimport JoinRoomContent from \"./JoinRoomContent\";\r\n\r\nimport \"./JoinRoomPage.css\";\r\n\r\nconst JoinRoomPage = (props) => {\r\n  const { setIsRoomHostAction, isRoomHost } = props;\r\n\r\n  const search = useLocation().search;\r\n\r\n  useEffect(() => {\r\n    const isRoomHost = new URLSearchParams(search).get(\"host\");\r\n    if (isRoomHost) {\r\n      setIsRoomHostAction(true);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"join_room_page_container\">\r\n      <div className=\"join_room_page_panel\">\r\n        <JoinRoomTitle isRoomHost={isRoomHost} />\r\n        <JoinRoomContent />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    setIsRoomHostAction: (isRoomHost) => dispatch(setIsRoomHost(isRoomHost)),\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps, mapActionsToProps)(JoinRoomPage);\r\n","import React from \"react\";\r\n\r\nconst ChatLabel = () => {\r\n  return (\r\n    <div className=\"chat_label_container\">\r\n      <p className=\"chat_label_paragraph\">CHAT</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatLabel;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst Message = ({ author, content, sameAuthor, messageCreatedByMe }) => {\r\n  const alignClass = messageCreatedByMe\r\n    ? \"message_align_right\"\r\n    : \"message_align_left\";\r\n\r\n  const authorText = messageCreatedByMe ? \"You\" : author;\r\n\r\n  const contentAdditionalStyles = messageCreatedByMe\r\n    ? \"message_right_styles\"\r\n    : \"message_left_styles\";\r\n\r\n  return (\r\n    <div className={`message_container ${alignClass}`}>\r\n      {!sameAuthor && <p className=\"message_title\">{authorText}</p>}\r\n      <p className={`message_content ${contentAdditionalStyles}`}>{content}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Messages = ({ messages }) => {\r\n  return (\r\n    <div className=\"messages_container\">\r\n      {messages.map((message, index) => {\r\n        const sameAuthor =\r\n          index > 0 && message.identity === messages[index - 1].identity;\r\n\r\n        return (\r\n          <Message\r\n            key={`${message.content}${index}`}\r\n            author={message.identity}\r\n            content={message.content}\r\n            sameAuthor={sameAuthor}\r\n            messageCreatedByMe={message.messageCreatedByMe}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(Messages);\r\n","export default __webpack_public_path__ + \"static/media/sendMessageButton.21b28e18.svg\";","import Actions from \"./actions\";\r\n\r\nconst initState = {\r\n  identity: \"\",\r\n  isRoomHost: false,\r\n  connectOnlyWithAudio: false,\r\n  roomId: null,\r\n  showOverlay: true,\r\n  participants: [],\r\n  messages: [],\r\n};\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case Actions.SET_IS_ROOM_HOST:\r\n      return {\r\n        ...state,\r\n        isRoomHost: action.isRoomHost,\r\n      };\r\n    case Actions.SET_CONNECT_ONLY_WITH_AUDIO:\r\n      return {\r\n        ...state,\r\n        connectOnlyWithAudio: action.onlyWithAudio,\r\n      };\r\n    case Actions.SET_ROOM_ID:\r\n      return {\r\n        ...state,\r\n        roomId: action.roomId,\r\n      };\r\n    case Actions.SET_IDENTITY:\r\n      return {\r\n        ...state,\r\n        identity: action.identity,\r\n      };\r\n    case Actions.SET_SHOW_OVERLAY:\r\n      return {\r\n        ...state,\r\n        showOverlay: action.showOverlay,\r\n      };\r\n    case Actions.SET_PARTICIPANTS:\r\n      return {\r\n        ...state,\r\n        participants: action.participants,\r\n      };\r\n    case Actions.SET_MESSAGES:\r\n      return {\r\n        ...state,\r\n        messages: action.messages,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport reducer from \"./reducer\";\r\n\r\nexport const store = configureStore({\r\n  reducer: reducer,\r\n});\r\n\r\nexport default store;\r\n","import io from \"socket.io-client\";\r\nimport { setRoomId, setParticipants } from \"../store/actions\";\r\nimport store from \"../store/store\";\r\nimport * as webRTCHandler from \"./webRTCHandler\";\r\n\r\n//const SERVER = \"http://localhost:5002\";\r\nconst SERVER = \"https://annavideoserver.herokuapp.com\";\r\nlet socket = null;\r\n\r\nexport const connectWithSocketIOServer = () => {\r\n  socket = io(SERVER);\r\n\r\n  socket.on(\"connect\", () => {\r\n    console.log(\"successfully connected with socket io server\");\r\n    console.log(socket.id);\r\n  });\r\n\r\n  socket.on(\"room-id\", (data) => {\r\n    const { roomId } = data;\r\n    store.dispatch(setRoomId(roomId));\r\n  });\r\n\r\n  socket.on(\"room-update\", (data) => {\r\n    const { connectedUsers } = data;\r\n    store.dispatch(setParticipants(connectedUsers));\r\n  });\r\n\r\n  socket.on(\"conn-prepare\", (data) => {\r\n    const { connUserSocketId } = data;\r\n\r\n    webRTCHandler.prepareNewPeerConnection(connUserSocketId, false);\r\n\r\n    // inform the user which just join the room that we have prepared for incoming connection\r\n    socket.emit(\"conn-init\", { connUserSocketId: connUserSocketId });\r\n  });\r\n\r\n  socket.on(\"conn-signal\", (data) => {\r\n    webRTCHandler.handleSignalingData(data);\r\n  });\r\n\r\n  socket.on(\"conn-init\", (data) => {\r\n    const { connUserSocketId } = data;\r\n    webRTCHandler.prepareNewPeerConnection(connUserSocketId, true);\r\n  });\r\n\r\n  socket.on(\"user-disconnected\", (data) => {\r\n    webRTCHandler.removePeerConnection(data);\r\n  });\r\n};\r\n\r\nexport const createNewRoom = (identity, onlyAudio) => {\r\n  // emit an event to server that we would like to create new room\r\n  const data = {\r\n    identity,\r\n    onlyAudio,\r\n  };\r\n\r\n  socket.emit(\"create-new-room\", data);\r\n};\r\n\r\nexport const joinRoom = (identity, roomId, onlyAudio) => {\r\n  //emit an event to server that we would to join a room\r\n  const data = {\r\n    roomId,\r\n    identity,\r\n    onlyAudio,\r\n  };\r\n\r\n  socket.emit(\"join-room\", data);\r\n};\r\n\r\nexport const signalPeerData = (data) => {\r\n  socket.emit(\"conn-signal\", data);\r\n};\r\n","import React, { useState } from \"react\";\r\nimport SendMessageButton from \"../../resources/images/sendMessageButton.svg\";\r\nimport * as webRTCHandler from \"../../utils/webRTCHandler\";\r\n\r\nconst NewMessage = () => {\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleTextChange = (event) => {\r\n    setMessage(event.target.value);\r\n  };\r\n\r\n  const handleKeyPressed = (event) => {\r\n    if (event.key === \"Enter\") {\r\n      event.preventDefault();\r\n\r\n      // send message to other users\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  const sendMessage = () => {\r\n    if (message.length > 0) {\r\n      webRTCHandler.sendMessageUsingDataChannel(message);\r\n      setMessage(\"\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"new_message_container\">\r\n      <input\r\n        className=\"new_message_input\"\r\n        value={message}\r\n        onChange={handleTextChange}\r\n        placeholder=\"Type your message ...\"\r\n        type=\"text\"\r\n        onKeyDown={handleKeyPressed}\r\n      />\r\n      <img\r\n        className=\"new_message_button\"\r\n        src={SendMessageButton}\r\n        onClick={sendMessage}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewMessage;\r\n","import React from \"react\";\r\nimport ChatLabel from \"./ChatLabel\";\r\nimport Messages from \"./Messages\";\r\nimport NewMessage from \"./NewMessage\";\r\n\r\nconst ChatSection = () => {\r\n  return (\r\n    <div className=\"chat_section_container\">\r\n      <ChatLabel />\r\n      <Messages />\r\n      <NewMessage />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatSection;\r\n","import React from \"react\";\r\n\r\nconst ParticipantsLabel = () => {\r\n  return (\r\n    <div className=\"participants_label_container\">\r\n      <p className=\"participants_label_paragraph\">PARTICIPANTS</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParticipantsLabel;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst SingleParticipant = (props) => {\r\n  const { identity, lastItem, participant } = props;\r\n\r\n  return (\r\n    <>\r\n      <p className=\"participants_paragraph\">{identity}</p>\r\n      {!lastItem && <span className=\"participants_separator_line\"></span>}\r\n    </>\r\n  );\r\n};\r\n\r\nconst Participants = ({ participants }) => {\r\n  return (\r\n    <div className=\"participants_container\">\r\n      {participants.map((participant, index) => {\r\n        return (\r\n          <SingleParticipant\r\n            key={participant.identity}\r\n            lastItem={participants.length === index + 1}\r\n            participant={participant}\r\n            identity={participant.identity}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(Participants);\r\n","import React from \"react\";\r\nimport ParticipantsLabel from \"./ParticipantsLabel\";\r\nimport Participants from \"./Participants\";\r\n\r\nconst ParticipantsSection = () => {\r\n  return (\r\n    <div className=\"participants_section_container\">\r\n      <ParticipantsLabel />\r\n      <Participants />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParticipantsSection;\r\n","export default __webpack_public_path__ + \"static/media/camera.618153de.svg\";","export default __webpack_public_path__ + \"static/media/cameraOff.70f16345.svg\";","import React, { useState } from \"react\";\r\n\r\nimport CameraButtonImg from \"../../resources/images/camera.svg\";\r\nimport CameraButtonImgOff from \"../../resources/images/cameraOff.svg\";\r\nimport * as webRTCHandler from \"../../utils/webRTCHandler\";\r\n\r\nconst CameraButton = () => {\r\n  const [isLocalVideoDisabled, setIsLocalVideoDisabled] = useState(false);\r\n\r\n  const handleCameraButtonPressed = () => {\r\n    webRTCHandler.toggleCamera(isLocalVideoDisabled);\r\n\r\n    setIsLocalVideoDisabled(!isLocalVideoDisabled);\r\n  };\r\n\r\n  return (\r\n    <div className=\"video_button_container\">\r\n      <img\r\n        src={isLocalVideoDisabled ? CameraButtonImgOff : CameraButtonImg}\r\n        className=\"video_button_image\"\r\n        onClick={handleCameraButtonPressed}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CameraButton;\r\n","import React from \"react\";\r\n\r\nconst LeaveRoomButton = () => {\r\n  const handleRoomDisconnection = () => {\r\n    const siteUrl = window.location.origin;\r\n    window.location.href = siteUrl;\r\n  };\r\n\r\n  return (\r\n    <div className=\"video_button_container\">\r\n      <button className=\"video_button_end\" onClick={handleRoomDisconnection}>\r\n        Leave Room\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LeaveRoomButton;\r\n","export default __webpack_public_path__ + \"static/media/mic.7a73c4c9.svg\";","export default __webpack_public_path__ + \"static/media/micOff.e9ff196e.svg\";","import React, { useState } from \"react\";\r\nimport MicButtonImg from \"../../resources/images/mic.svg\";\r\nimport MicButtonImgOff from \"../../resources/images/micOff.svg\";\r\nimport * as webRTCHandler from \"../../utils/webRTCHandler\";\r\n\r\nconst MicButton = () => {\r\n  const [isMicMuted, setIsMicMuted] = useState(false);\r\n\r\n  const handleMicButtonPressed = () => {\r\n    webRTCHandler.toggleMic(isMicMuted);\r\n\r\n    setIsMicMuted(!isMicMuted);\r\n  };\r\n\r\n  return (\r\n    <div className=\"video_button_container\">\r\n      <img\r\n        src={isMicMuted ? MicButtonImgOff : MicButtonImg}\r\n        onClick={handleMicButtonPressed}\r\n        className=\"video_button_image\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MicButton;\r\n","export default __webpack_public_path__ + \"static/media/switchToScreenSharing.af807573.svg\";","import React, { useRef, useEffect } from \"react\";\r\n\r\nconst LocalScreenSharingPreview = ({ stream }) => {\r\n  const localPreviewRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const video = localPreviewRef.current;\r\n\r\n    video.srcObject = stream;\r\n\r\n    video.onloadedmetadata = () => {\r\n      video.play();\r\n    };\r\n  }, [stream]);\r\n\r\n  return (\r\n    <div className=\"local_screen_share_preview\">\r\n      <video muted autoPlay ref={localPreviewRef}></video>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LocalScreenSharingPreview;\r\n","import React, { useState } from \"react\";\r\nimport SwitchImg from \"../../resources/images/switchToScreenSharing.svg\";\r\nimport LocalScreenSharingPreview from \"./LocalScreenSharingPreview\";\r\nimport * as webRTCHandler from \"../../utils/webRTCHandler\";\r\n\r\nconst constraints = {\r\n  audio: false,\r\n  video: true,\r\n};\r\n\r\nconst SwitchToScreenSharingButton = () => {\r\n  const [isScreenSharingActive, setIsScreenSharingActive] = useState(false);\r\n  const [screenSharingStream, setScreenSharingStream] = useState(null);\r\n\r\n  const handleScreenShareToggle = async () => {\r\n    if (!isScreenSharingActive) {\r\n      let stream = null;\r\n      try {\r\n        stream = await navigator.mediaDevices.getDisplayMedia(constraints);\r\n      } catch (err) {\r\n        console.log(\r\n          \"error occurred when trying to get an access to screen share stream\"\r\n        );\r\n      }\r\n      if (stream) {\r\n        setScreenSharingStream(stream);\r\n\r\n        webRTCHandler.toggleScreenShare(isScreenSharingActive, stream);\r\n        setIsScreenSharingActive(true);\r\n        // execute here function to switch the video track which we are sending to other users\r\n      }\r\n    } else {\r\n      webRTCHandler.toggleScreenShare(isScreenSharingActive);\r\n      setIsScreenSharingActive(false);\r\n\r\n      // stop screen share stream\r\n      screenSharingStream.getTracks().forEach((t) => t.stop());\r\n      setScreenSharingStream(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"video_button_container\">\r\n        <img\r\n          src={SwitchImg}\r\n          onClick={handleScreenShareToggle}\r\n          className=\"video_button_image\"\r\n        />\r\n      </div>\r\n      {isScreenSharingActive && (\r\n        <LocalScreenSharingPreview stream={screenSharingStream} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SwitchToScreenSharingButton;\r\n","import React from \"react\";\r\nimport CameraButton from \"./CameraButton\";\r\nimport LeaveRoomButton from \"./LeaveRoomButton\";\r\nimport MicButton from \"./MicButton\";\r\nimport SwitchToScreenSharingButton from \"./SwitchToScreenSharingButton\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst VideoButtons = (props) => {\r\n  const { connectOnlyWithAudio } = props;\r\n\r\n  return (\r\n    <div className=\"video_buttons_container\">\r\n      <MicButton />\r\n      {!connectOnlyWithAudio && <CameraButton />}\r\n      <LeaveRoomButton />\r\n      {!connectOnlyWithAudio && <SwitchToScreenSharingButton />}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(VideoButtons);\r\n","import React from \"react\";\r\nimport VideoButtons from \"./VideoButtons\";\r\n\r\nconst VideoSection = () => {\r\n  return (\r\n    <div className=\"video_section_container\">\r\n      <VideoButtons />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoSection;\r\n","import React from \"react\";\r\n\r\nconst RoomLabel = ({ roomId }) => {\r\n  return (\r\n    <div className=\"room_label\">\r\n      <p className=\"room_label_paragraph\">ID: {roomId} </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoomLabel;\r\n","import React from \"react\";\r\n\r\nconst Overlay = () => {\r\n  return (\r\n    <div className=\"overlay_container\">\r\n      <div className=\"loader\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Overlay;\r\n","import React, { useEffect } from \"react\";\r\nimport ChatSection from \"./ChatSection/ChatSection\";\r\nimport ParticipantsSection from \"./ParticipantsSection/ParticipantsSection\";\r\nimport VideoSection from \"./VideoSection/VideoSection\";\r\nimport RoomLabel from \"./RoomLabel\";\r\nimport { connect } from \"react-redux\";\r\nimport * as webRTCHandler from \"../utils/webRTCHandler\";\r\nimport Overlay from \"./Overlay\";\r\n\r\nimport \"./RoomPage.css\";\r\n\r\nconst RoomPage = ({\r\n  roomId,\r\n  identity,\r\n  isRoomHost,\r\n  showOverlay,\r\n  connectOnlyWithAudio,\r\n}) => {\r\n  useEffect(() => {\r\n    if (!isRoomHost && !roomId) {\r\n      const siteUrl = window.location.origin;\r\n      window.location.href = siteUrl;\r\n    } else {\r\n      webRTCHandler.getLocalPreviewAndInitRoomConnection(\r\n        isRoomHost,\r\n        identity,\r\n        roomId,\r\n        connectOnlyWithAudio\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"room_container\">\r\n      <ParticipantsSection />\r\n      <VideoSection />\r\n      <ChatSection />\r\n      <RoomLabel roomId={roomId} />\r\n      {showOverlay && <Overlay />}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(RoomPage);\r\n","import React, { useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport IntroductionPage from \"./IntroductionPage/IntroductionPage\";\r\nimport JoinRoomPage from \"./JoinRoomPage/JoinRoomPage\";\r\nimport RoomPage from \"./RoomPage/RoomPage\";\r\nimport { connectWithSocketIOServer } from \"./utils/wss\";\r\n\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  useEffect(() => {\r\n    connectWithSocketIOServer();\r\n  }, []);\r\n\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route path=\"/join-room\">\r\n          <JoinRoomPage />\r\n        </Route>\r\n        <Route path=\"/room\">\r\n          <RoomPage />\r\n        </Route>\r\n        <Route path=\"/\">\r\n          <IntroductionPage />\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { store } from './store/store';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}